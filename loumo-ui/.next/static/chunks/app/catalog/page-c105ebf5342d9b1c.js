(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{389:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),s=r(3343),n=r(840),o=r(3861),c=r(5799);class d{constructor(){this.route="/categories",this.create=async e=>o.A.post("".concat(this.route),e).then(e=>(c.oR.success("Welcome back ".concat(e.data.category.name)),e.data)),this.getAll=async()=>o.A.get("".concat(this.route)).then(e=>e.data),this.getOne=async e=>o.A.get("".concat(this.route,"/").concat(e)).then(e=>e.data),this.update=async(e,t)=>o.A.put("".concat(this.route,"/").concat(e),t).then(e=>e.data),this.delete=async e=>o.A.delete("/".concat(this.route,"/").concat(e)).then(e=>e.data)}}var l=r(2960);r(2115);var i=r(9994);let u=()=>{let e=new d,t=(0,l.I)({queryKey:["categoryData"],queryFn:()=>e.getAll()}),{addOrderItem:r,removeOrderItem:o,currentOrderItems:c}=(0,n.P)();if(t.isLoading)return(0,a.jsx)(s.A,{status:"loading"});if(t.isError)return(0,a.jsx)(s.A,{status:"failed"});if(t.isSuccess){var u,p,m,h;let e=null==(h=t.data)||null==(m=h[0])||null==(p=m.products)||null==(u=p[0])?void 0:u.variants;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 max-w-3xl mx-auto mt-10",children:[e&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("p",{children:"add to cart :"})," ",(0,a.jsx)("button",{type:"button",className:" border rounded-lg",onClick:()=>r({variant:e[0],note:""}),children:"Add"})]}),e&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("p",{children:"remove from cart :"})," ",(0,a.jsx)("button",{onClick:()=>o(e[0].id),children:"Add"})]}),c.map(e=>(0,a.jsx)(i.Ay,{src:e}))]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto mt-10",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Category Catalogue Data"}),(0,a.jsx)(i.Ay,{src:t.data})]})]})}return(0,a.jsx)(s.A,{})}},840:(e,t,r)=>{"use strict";let a;r.d(t,{P:()=>i});var s=r(5799),n=r(2115);let o=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,s,n);return n},c=e=>e?o(e):o,d=e=>e,l=e=>{let t=c(e),r=e=>(function(e,t=d){let r=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=l((e,t)=>({user:null,setUser:t=>e(()=>({user:t})),logout:()=>e({user:null}),categories:[],setCategories:t=>e(()=>({categories:t})),orders:[],setOrders:t=>e(()=>({orders:t})),resetUser:()=>e(()=>({user:null})),currentOrderItems:[],orderNote:"",orderAddressId:null,addOrderItem:r=>{let{variant:a,note:n}=r;if(t().currentOrderItems.find(e=>e.productVariantId===a.id))e(e=>({currentOrderItems:e.currentOrderItems.map(e=>e.productVariantId===a.id?{...e,quantity:e.quantity+1,total:(e.quantity+1)*(a.price||0)}:e)})),s.oR.info("Increased quantity for ".concat(a.name));else{let t=a.price||0,r={id:0,orderId:0,note:n,productVariant:a,productVariantId:a.id,quantity:1,total:t,deliveryId:null};e(e=>({currentOrderItems:[...e.currentOrderItems,r]})),s.oR.success("Added ".concat(a.name," to order"))}},incrementOrderItem:t=>e(e=>({currentOrderItems:e.currentOrderItems.map(e=>{var r;return e.productVariantId===t?{...e,quantity:e.quantity+1,total:(e.quantity+1)*((null==(r=e.productVariant)?void 0:r.price)||0)}:e})})),decrementOrderItem:t=>e(e=>({currentOrderItems:e.currentOrderItems.map(e=>{var r;return e.productVariantId===t?{...e,quantity:e.quantity-1,total:(e.quantity-1)*((null==(r=e.productVariant)?void 0:r.price)||0)}:e}).filter(e=>e.quantity>0)})),removeOrderItem:t=>e(e=>({currentOrderItems:e.currentOrderItems.filter(e=>e.productVariantId!==t)})),getOrderTotal:()=>t().currentOrderItems.reduce((e,t)=>e+t.total,0),setOrderNote:t=>e({orderNote:t}),setOrderAddress:t=>e({orderAddressId:t}),resetOrderDraft:()=>e({currentOrderItems:[],orderNote:"",orderAddressId:null})}))},3343:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),s=r(2115);let n=e=>{let{status:t}=e,[r,n]=(0,s.useState)("");return(0,s.useEffect)(()=>{switch(t){case"loading":n("Loading...");break;case"failed":n("We could not get the data you are looking for");break;default:n("An unexpected error occured")}},[]),(0,a.jsxs)("div",{className:"h-screen w-full flex items-center justify-center flex-col gap-4 font-bold rounded-lg px-12 p-4 border-gray-500",children:[(0,a.jsx)("video",{src:"/loading.webm",className:"aspect-video object-contain w-full max-w[250px] h-[150px]",loop:!0,autoPlay:!0,muted:!0,playsInline:!0,children:(0,a.jsx)("source",{src:"/loading.webm",type:"video/webm"})}),(0,a.jsx)("p",{children:r})]})}},3861:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(3464),s=r(5799);let n=a.A.create({baseURL:"http://localhost:5000/api/",timeout:1e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(s.oR.error("Request setup error."),Promise.reject(e))),n.interceptors.response.use(e=>{var t;let{method:r,url:a}=e.config,n=null==(t=e.data)?void 0:t.message;if(["POST","PUT","PATCH","DELETE"].includes((null==r?void 0:r.toUpperCase())||"")&&a){let e=a.match(/\/api\/([^\/\?]+)/),t=(null==e?void 0:e[1])||"Entity";t=t.charAt(0).toUpperCase()+t.slice(1).replace(/s$/,"");let o={POST:"created",PUT:"updated",PATCH:"updated",DELETE:"deleted"}[(null==r?void 0:r.toUpperCase())||""]||"processed",c=n||"".concat(t," ").concat(o," successfully.");s.oR.success(c)}return e},e=>{var t;let r=e.response,a=(null==r||null==(t=r.data)?void 0:t.message)||"An unexpected error occurred.";if(r)switch(r.status){case 400:s.oR.warning(a);break;case 401:s.oR.error(a||"Unauthorized. Please log in again.");break;case 403:s.oR.error(a||"Access denied.");break;case 404:s.oR.info(a||"Resource not found.");break;case 500:s.oR.error(a||"Internal server error.");break;default:s.oR.error(a)}else e.request?s.oR.error("No response from server. Check your internet connection."):s.oR.error("Error: ".concat(e.message));return Promise.reject(e)});let o=n},9353:(e,t,r)=>{Promise.resolve().then(r.bind(r,389))}},e=>{var t=t=>e(e.s=t);e.O(0,[113,464,994,960,441,684,358],()=>t(9353)),_N_E=e.O()}]);